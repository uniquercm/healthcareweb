<div class="header">
  <h3>NURSE OUTSIDE</h3>
</div>


<div class="p-3">

  <mat-card>
    <form [formGroup]="formGroup">
      <div class="row pt-5 pl-5 pr-5">
        <div class="col-lg-4 col-md-2 col-sm-12">
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Request/Case Type</mat-label>
            <input matInput required formControlName="crmType" readonly>
          </mat-form-field>
        </div>
        <div class="col-lg-4 col-md-2 col-sm-12">
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>CRM no</mat-label>
            <input matInput formControlName="crmNo" required readonly>
          </mat-form-field>
        </div>
        <div class="col-lg-4 col-md-2 col-sm-12">
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" required readonly>
          </mat-form-field>
        </div>
        <div class="col-lg-4 col-md-2 col-sm-12">
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>EID</mat-label>
            <input matInput formControlName="eid" required readonly>
          </mat-form-field>
        </div>
        <div class="col-lg-4 col-md-2 col-sm-12">
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Mobile No</mat-label>
            <input matInput formControlName="mobileno" required readonly>
          </mat-form-field>
        </div>
      </div>
    </form>

    <mat-horizontal-stepper labelPosition="bottom" #stepper>
      <mat-step [stepControl]="firstFormGroup">
        <form [formGroup]="firstFormGroup">
          <ng-template matStepLabel>Address Data</ng-template>
          <div class="row">
            <div class="col-lg-4 col-md-2 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Address</mat-label>
                <textarea matInput readonly formControlName="address" required></textarea>
              </mat-form-field>
            </div>
            <div class="col-lg-4 col-md-2 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Land Mark</mat-label>
                <input matInput readonly formControlName="landmark" required>
              </mat-form-field>
            </div>
            <div class="col-lg-4 col-md-2 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Area</mat-label>
                <input matInput readonly formControlName="area" required>
              </mat-form-field>
            </div>
            <div class="col-lg-4 col-md-2 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Region</mat-label>
                <input matInput readonly formControlName="region" required>
              </mat-form-field>
            </div>
            <div class="col-lg-4 col-md-2 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Google Map Link</mat-label>
                <input matInput readonly formControlName="map" required>
              </mat-form-field>
            </div>
          </div>
          <div class="text-end">
            <button mat-raised-button class="login-button" matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup">
        <form [formGroup]="secondFormGroup">
          <ng-template matStepLabel>Home Inmates</ng-template>
          <div class="row">
            <div class="col-lg-4 col-md-2 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>No Of Adults</mat-label>
                <input matInput readonly formControlName="adults" required>
              </mat-form-field>
            </div>
            <div class="col-lg-4 col-md-2 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>No Of Children</mat-label>
                <input matInput readonly formControlName="childern" required>
              </mat-form-field>
            </div>

            <div class="row">

              <div class="col-lg-4 col-md-2 col-sm-12 row" *ngFor="let phone of getPhonesFormControls(); let i = index">
                <mat-form-field style="width: auto;" appearance="outline">
                  <mat-label>MMID</mat-label>
                  <input matInput [formControl]="phone">
                </mat-form-field>
                <mat-icon (click)="removePhone(i)" style="cursor: pointer;" class="pt-3"> delete_outline</mat-icon>
              </div>


              <mat-icon (click)="addPhone()" style="cursor: pointer;" class="pt-3"> add_circle</mat-icon>


            </div>

          </div>

          <div class="text-end">
            <button mat-raised-button class="warning-button" matStepperPrevious>Back</button>
            <button mat-raised-button class="login-button ml-4" matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Service Plan</ng-template>
        <form [formGroup]="thirdFormGroup">
          <div class="row">
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Sticker Application</mat-label>
                <mat-select formControlName="stickerapp" [disabled]="sappl">
                  <mat-option value="yes">Yes</mat-option>
                  <mat-option value="no"> No</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Tracker Application</mat-label>
                <input matInput formControlName="trackerapp">
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>PCR</mat-label>
                <input matInput formControlName="pcr" readonly>
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Sticker Removal</mat-label>
                <mat-select formControlName="stickerrem" [disabled]="srem">
                  <mat-option value="yes">Yes</mat-option>
                  <mat-option value="no"> No</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Tracker Removal</mat-label>
                <input matInput formControlName="trackerrem">
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Remarks</mat-label>
                <textarea matInput rows="2" formControlName="remark"></textarea>
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Discharge Status</mat-label>
                <mat-select formControlName="dischargestatus">
                  <mat-option value="discharge">Discharge</mat-option>
                  <mat-option value="pending">Pending </mat-option>
                  <mat-option value="other">Other</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Sticker/Tracker Status</mat-label>
                <mat-select formControlName="stickerstatus" (selectionChange)="statuschange($event)">
                  <mat-option value="applied">Applied</mat-option>
                  <mat-option value="removed">Removed </mat-option>
                  <mat-option value="replace">Replace</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12"
              *ngIf="(stausvalue==='applied') || (stausvalue==='removed')">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Sticker Applied/Removed No</mat-label>
                <input matInput formControlName="stickerano">
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12"
              *ngIf="(stausvalue==='applied') || (stausvalue==='removed')">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Sticker Applied/Removed Applied Date</mat-label>
                <input matInput [matDatepicker]="fpspicker" formControlName="spicker">
                <mat-datepicker-toggle matSuffix [for]="fpspicker"></mat-datepicker-toggle>
                <mat-datepicker touchUi #fpspicker></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12" *ngIf="stausvalue==='replace'">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Sticker Replace No</mat-label>
                <input matInput formControlName="stickerrno">
              </mat-form-field>
            </div>
            <div class="col-ls-4 col-xl-4 col-md-6 col-sm-12" *ngIf="stausvalue==='replace'">
              <mat-form-field class="full-width" appearance="outline">
                <mat-label>Sticker Replace Date</mat-label>
                <input matInput [matDatepicker]="fpspickers" formControlName="fpspicker">
                <mat-datepicker-toggle matSuffix [for]="fpspickers"></mat-datepicker-toggle>
                <mat-datepicker touchUi #fpspickers></mat-datepicker>
              </mat-form-field>
            </div>
          </div>
        </form>
        <div class="text-end">
          <button mat-raised-button class="warning-button" matStepperPrevious>Back</button>
          <button mat-raised-button class="login-button ml-4" (click)="saverec()">Save</button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>

    <form [formGroup]="fourthFormGroup">
      <div class="p-3 row">

        <div class="col-lg-4 col-md-2 col-sm-12">
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Visit Status</mat-label>
            <mat-select #visit formControlName="vstatus">
              <mat-option value="visited">Visited</mat-option>
              <mat-option value="pending"> Pending</mat-option>
            </mat-select>
          </mat-form-field>
        </div>


        <div class="col-lg-4 col-md-2 col-sm-12">
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Remarks</mat-label>
            <input matInput required #remark formControlName="vremark">
          </mat-form-field>
        </div>

        <div class="col-lg-4 col-md-2 col-sm-12">
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Visited Date</mat-label>
            <input matInput [matDatepicker]="vpicker" formControlName="vdate" #vdate>
            <mat-datepicker-toggle matSuffix [for]="vpicker"></mat-datepicker-toggle>
            <mat-datepicker touchUi #vpicker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="text-end">
          <button mat-raised-button color="warn" [routerLink]="['/apps/fieldallocation/nurse']"
            class="back-button">Back</button>

          <button mat-raised-button class="login-button ml-4" (click)="save(visit,remark, vdate)">Save</button>
        </div>

      </div>
    </form>

  </mat-card>

</div>